<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Designing an HTML form!!</title>
    <link rel="stylesheet" href="3Q2GStyle.css">

<script>
    // Displays a confirmation dialog before final form submission
    function confirmSubmission(){
        return confirm("Are you sure all information in the submission is complete and true?");
    }
    // Confirms if the user really wants to reset all entered form data
    function confirmReset(){
        return confirm("Are you sure you want to reset this form?");
    }
    // Adds or removes an error class if the field is left blank
    // This improves user feedback without submitting the form
    function checkBlank(field){
        if(field.value.trim() === ""){
            field.classList.add("Error");
        } else {
            field.classList.remove("Error");
        }
    }
    // Saves the student signup information to localStorage
    // Data is stored as an array of objects to allow multiple sign-ups
    function saveSignup(event){
        event.preventDefault(); // Prevents page reload on submit
        // Stop submission if user cancels confirmation
        if(!confirmSubmission()) return;
        // Retrieve existing signups or initialize a new array
        let signups = JSON.parse(localStorage.getItem("signups")) || [];
        let form = event.target;
        // Create an object representing one student's signup
        let signupData = {
            id: form.studentID.value,
            name: form.userName.value,
            email: form.eMail.value,
            mobile: form.mobilePhone.value,
            grade: form.gradeLevel.options[form.gradeLevel.selectedIndex].text,
            residency: form.residency.value === "I" ? "Intern" : "Extern",
            club: form.preferredEC.options[form.preferredEC.selectedIndex].text
        };
        // Add new signup to the array
        signups.push(signupData);
        // Save updated signup list back to localStorage
        localStorage.setItem("signups", JSON.stringify(signups));
        alert("Signup saved successfully!");
        form.reset();
    }
</script>

</head>

<body>
<h1> Frances Reanna R. Rugayan, 9-Sodium, Batch 2029 </h1>

<form onsubmit="saveSignup(event)" onreset="return confirmReset();">

    <fieldset>
        <legend>Student Information</legend>

        <label>Student ID:
            <input type="number" name="studentID" required>
        </label><br><br>

        <label>Full Name:
            <input type="text" name="userName" required onblur="checkBlank(this)">
        </label><br><br>

        <label>Email:
            <input type="email" name="eMail" required>
        </label><br><br>
    </fieldset>
    <br>
    <fieldset>
        <legend>Additional Information</legend>

        <label>Mobile Phone:
            <input type="text" name="mobilePhone" required onblur="checkBlank(this)">
        </label><br><br>

        <label>Grade Level:
            <select name="gradeLevel" required>
                <option value=""></option>
                <option>Grade 7</option>
                <option>Grade 8</option>
                <option>Grade 9</option>
                <option>Grade 10</option>
                <option>Grade 11</option>
                <option>Grade 12</option>
            </select>
        </label><br>

        <p>Residency Type:</p>
        <label><input type="radio" name="residency" value="I" required> Intern</label><br>
        <label><input type="radio" name="residency" value="E"> Extern</label><br><br>

        <label>Preferred Organization / Club:
            <select name="preferredEC" required>
                <option value=""></option>
                <option>The Science Scholar</option>
                <option>Ang Lagablab</option>
                <option>FLUX</option>
                <option>Volant</option>
                <option>Solace</option>
            </select>
        </label><br><br>
    </fieldset>
<br>
    <input type="submit" value="Submit Application">
    <input type="reset" value="Reset Application">
    <br><br>

    <a href="viewSignUps.html">View Signups</a>

    <br>

</form>
</body>
</html>
